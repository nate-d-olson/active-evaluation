

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>aegis.oracle.oracle module &mdash; aegis v2020.04.03_dev documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="aegis.oracle package" href="aegis.oracle.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> aegis
          

          
          </a>

          
            
            
              <div class="version">
                v2020.04.03_dev
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../readme.html">Aegis Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../readme.html#quick-start">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../readme.html#running-experiments-with-aegis-when-ground-truth-is-known">Running Experiments with Aegis when Ground Truth is Known</a></li>
<li class="toctree-l1"><a class="reference internal" href="../readme.html#code-approach">Code Approach</a></li>
<li class="toctree-l1"><a class="reference internal" href="../readme.html#running-continuous-integration-components-locally">Running Continuous Integration Components Locally</a></li>
<li class="toctree-l1"><a class="reference internal" href="../readme.html#license">LICENSE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../readme.html#disclaimer">Disclaimer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">CHANGELOG</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../API_reference.html">API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="aegis.html">aegis package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="aegis.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="aegis.acteval.html">aegis.acteval package</a></li>
<li class="toctree-l4"><a class="reference internal" href="aegis.datagenerator.html">aegis.datagenerator package</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="aegis.oracle.html">aegis.oracle package</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="aegis.acteval.html">aegis.acteval package</a></li>
<li class="toctree-l2"><a class="reference internal" href="aegis.acteval.controller.html">aegis.acteval.controller module</a></li>
<li class="toctree-l2"><a class="reference internal" href="aegis.acteval.data_processor.html">aegis.acteval.data_processor module</a></li>
<li class="toctree-l2"><a class="reference internal" href="aegis.acteval.experiment.html">aegis.acteval.experiment module</a></li>
<li class="toctree-l2"><a class="reference internal" href="aegis.acteval.metrics.html">aegis.acteval.metrics module</a></li>
<li class="toctree-l2"><a class="reference internal" href="aegis.acteval.samplers.html">aegis.acteval.samplers module</a></li>
<li class="toctree-l2"><a class="reference internal" href="aegis.acteval.strata.html">aegis.acteval.strata module</a></li>
<li class="toctree-l2"><a class="reference internal" href="aegis.acteval.stratum.html">aegis.acteval.stratum module</a></li>
<li class="toctree-l2"><a class="reference internal" href="aegis.acteval.summary_reporter.html">aegis.acteval.summary_reporter module</a></li>
<li class="toctree-l2"><a class="reference internal" href="aegis.acteval.system.html">aegis.acteval.system module</a></li>
<li class="toctree-l2"><a class="reference internal" href="aegis.datagenerator.html">aegis.datagenerator package</a></li>
<li class="toctree-l2"><a class="reference internal" href="aegis.datagenerator.data_generator.html">aegis.datagenerator.data_generator module</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="aegis.oracle.html">aegis.oracle package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="aegis.oracle.html#submodules">Submodules</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">aegis.oracle.oracle module</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">aegis.oracle.oracle module</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">aegis</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../API_reference.html">API Reference</a> &raquo;</li>
        
          <li><a href="aegis.html">aegis package</a> &raquo;</li>
        
          <li><a href="aegis.oracle.html">aegis.oracle package</a> &raquo;</li>
        
      <li>aegis.oracle.oracle module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/api/aegis.oracle.oracle.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-aegis.oracle.oracle">
<span id="aegis-oracle-oracle-module"></span><h1>aegis.oracle.oracle module<a class="headerlink" href="#module-aegis.oracle.oracle" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="aegis.oracle.oracle.Oracle">
<em class="property">class </em><code class="sig-prename descclassname">aegis.oracle.oracle.</code><code class="sig-name descname">Oracle</code><a class="reference internal" href="../_modules/aegis/oracle/oracle.html#Oracle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aegis.oracle.oracle.Oracle" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABC</span></code></p>
<dl class="method">
<dt id="aegis.oracle.oracle.Oracle.get_annotations">
<em class="property">abstract </em><code class="sig-name descname">get_annotations</code><span class="sig-paren">(</span><em class="sig-param">trial_samples</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aegis/oracle/oracle.html#Oracle.get_annotations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aegis.oracle.oracle.Oracle.get_annotations" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a (trial_id, key) pandas data frame with just the suggested trials</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>trial_samples</strong> (<em>list of object</em>) – A list of trial_id values to get the annotations for</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A two-column data frame with columns “trial_id” and “key”.
Resets the index
so that the index does not inadvertently contain information.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.core.frame.DataFrame</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="aegis.oracle.oracle.OracleScript">
<em class="property">class </em><code class="sig-prename descclassname">aegis.oracle.oracle.</code><code class="sig-name descname">OracleScript</code><span class="sig-paren">(</span><em class="sig-param">key_file</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aegis/oracle/oracle.html#OracleScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aegis.oracle.oracle.OracleScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#aegis.oracle.oracle.Oracle" title="aegis.oracle.oracle.Oracle"><code class="xref py py-class docutils literal notranslate"><span class="pre">aegis.oracle.oracle.Oracle</span></code></a></p>
<p>Oracle Script that assumes we have the ground truth for all trials stored separately.
This Oracle Script is useful for automating experiments when results are known.
Because OracleScript objects have a full key, we implement methods useful for experimental
simulations that leverage our knowledge of the full key on the data set.</p>
<dl class="method">
<dt id="aegis.oracle.oracle.OracleScript.all_within_ci">
<code class="sig-name descname">all_within_ci</code><span class="sig-paren">(</span><em class="sig-param">system_list</em>, <em class="sig-param">actual_score_list</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aegis/oracle/oracle.html#OracleScript.all_within_ci"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aegis.oracle.oracle.OracleScript.all_within_ci" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a list system objects and their actual system scores, provides a list of booleans
that tells us if each system’s estimate confidence interval contains the actual score.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>system_list</strong> (list of <a class="reference internal" href="aegis.acteval.system.html#aegis.acteval.system.System" title="aegis.acteval.system.System"><code class="xref py py-obj docutils literal notranslate"><span class="pre">aegis.acteval.system.System</span></code></a>) – The list of system objects</p></li>
<li><p><strong>actual_score_list</strong> (<em>list of float</em>) – The actual score of the systems</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of boolean values where each entry is True if the true score is
contained in the
confidence interval for that system, and False otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list of bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aegis.oracle.oracle.OracleScript.all_within_delta">
<code class="sig-name descname">all_within_delta</code><span class="sig-paren">(</span><em class="sig-param">system_list</em>, <em class="sig-param">actual_score_list</em>, <em class="sig-param">delta</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aegis/oracle/oracle.html#OracleScript.all_within_delta"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aegis.oracle.oracle.OracleScript.all_within_delta" title="Permalink to this definition">¶</a></dt>
<dd><p>Given the system objects and their actual system scores, provide a list of booleans
that tells us if each system’s estimate +- delta contains the actual score.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>system_list</strong> (list of <a class="reference internal" href="aegis.acteval.system.html#aegis.acteval.system.System" title="aegis.acteval.system.System"><code class="xref py py-obj docutils literal notranslate"><span class="pre">aegis.acteval.system.System</span></code></a>) – The list of system objects</p></li>
<li><p><strong>actual_score_list</strong> (<em>list of float</em>) – The actual score of the systems</p></li>
<li><p><strong>delta</strong> (<em>float</em>) – the specified delta value</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of boolean values where each entry is True if the true score is
contained in the
interval of system estimate is +- delta, and False otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list of bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aegis.oracle.oracle.OracleScript.get_actual_score_all_systems">
<code class="sig-name descname">get_actual_score_all_systems</code><span class="sig-paren">(</span><em class="sig-param">system_fpaths</em>, <em class="sig-param">threshold_fpaths</em>, <em class="sig-param">metric</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aegis/oracle/oracle.html#OracleScript.get_actual_score_all_systems"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aegis.oracle.oracle.OracleScript.get_actual_score_all_systems" title="Permalink to this definition">¶</a></dt>
<dd><p>Uses the full key file to get the actual score for each system with the specified metric
object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>system_fpaths</strong> (<em>list of str</em>) – The list of filepaths to the systems</p></li>
<li><p><strong>threshold_fpaths</strong> (<em>list of str</em>) – The list of filepaths to the thresholds</p></li>
<li><p><strong>metric</strong> (<a class="reference internal" href="aegis.acteval.metrics.html#aegis.acteval.metrics.Metric" title="aegis.acteval.metrics.Metric"><code class="xref py py-obj docutils literal notranslate"><span class="pre">aegis.acteval.metrics.Metric</span></code></a>) – The metric object that will
score the systems</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of scores, one per system in the order of the files in
system_fpaths</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list of float</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aegis.oracle.oracle.OracleScript.get_annotations">
<code class="sig-name descname">get_annotations</code><span class="sig-paren">(</span><em class="sig-param">trial_samples</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aegis/oracle/oracle.html#OracleScript.get_annotations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aegis.oracle.oracle.OracleScript.get_annotations" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a (trial_id, key) pandas data frame with just the suggested trials.
This implementation takes the relevant rows from the key file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>trial_samples</strong> (<em>list of object</em>) – A list of trial_id values to get the annotations for</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A two-column data frame with columns “trial_id” and “key”.
Resets the index so that the index does not inadvertently contain information.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.core.frame.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aegis.oracle.oracle.OracleScript.get_experiment_result_data">
<em class="property">static </em><code class="sig-name descname">get_experiment_result_data</code><span class="sig-paren">(</span><em class="sig-param">oracle_ref</em>, <em class="sig-param">input_dir</em>, <em class="sig-param">metric_object</em>, <em class="sig-param">stratification_type</em>, <em class="sig-param">num_strata</em>, <em class="sig-param">sampler_types=None</em>, <em class="sig-param">sampler_categories=None</em>, <em class="sig-param">system_ordering=None</em>, <em class="sig-param">bin_style_types=None</em>, <em class="sig-param">use_multinomials=None</em>, <em class="sig-param">num_success_rounds_required=3</em>, <em class="sig-param">num_step_samples=100</em>, <em class="sig-param">alpha=0.05</em>, <em class="sig-param">delta=0.01</em>, <em class="sig-param">num_iterations=1000</em>, <em class="sig-param">use_initial_df=True</em>, <em class="sig-param">request_initial_samples=True</em>, <em class="sig-param">initial_samples=10</em>, <em class="sig-param">parallelize=True</em>, <em class="sig-param">random_seed=None</em>, <em class="sig-param">final_log_path=None</em>, <em class="sig-param">sample_first=False</em>, <em class="sig-param">num_req_systems=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aegis/oracle/oracle.html#OracleScript.get_experiment_result_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aegis.oracle.oracle.OracleScript.get_experiment_result_data" title="Permalink to this definition">¶</a></dt>
<dd><p>The component of “run_experiment” that runs the data frames and returns
the data frames. By default, it runs an entire experiment but can
be customized to run smaller experiments.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>oracle_ref</strong> (<a class="reference internal" href="#aegis.oracle.oracle.Oracle" title="aegis.oracle.oracle.Oracle"><code class="xref py py-obj docutils literal notranslate"><span class="pre">aegis.oracle.oracle.Oracle</span></code></a>) – the Oracle object to call to get additional trials</p></li>
<li><p><strong>input_dir</strong> (<em>str</em>) – The path to the input directory of the submission</p></li>
<li><p><strong>metric_object</strong> (<a class="reference internal" href="aegis.acteval.metrics.html#aegis.acteval.metrics.Metric" title="aegis.acteval.metrics.Metric"><code class="xref py py-obj docutils literal notranslate"><span class="pre">aegis.acteval.metrics.Metric</span></code></a>) – The reference to the metric object that specifies how the trials will be scored</p></li>
<li><p><strong>stratification_type</strong> (<a class="reference internal" href="aegis.acteval.strata.html#aegis.acteval.strata.Strata" title="aegis.acteval.strata.Strata"><code class="xref py py-obj docutils literal notranslate"><span class="pre">aegis.acteval.strata.Strata</span></code></a>) – Strata class that gives the stratification strategy and type of strata</p></li>
<li><p><strong>num_strata</strong> (<em>int</em>) – The number of strata to have.</p></li>
<li><p><strong>sampler_types</strong> (list of <code class="xref py py-obj docutils literal notranslate"><span class="pre">abc.ABCMeta</span></code>, optional) – List of samplers you wish to use in experiment. Defaults to None, which
resolves to
[aegis.acteval.samplers.UniformTrialSampler,
aegis.acteval.samplers.UniformFixedTrialSampler,
aegis.acteval.samplers.ProportionalTrialSampler,
aegis.acteval.samplers.ProportionalFixedTrialSampler,
aegis.acteval.samplers.AdaptiveTrialSampler,
aegis.acteval.samplers.AdaptiveFixedTrialSampler,
aegis.acteval.samplers.RandomTrialSampler,
aegis.acteval.samplers.RandomFixedTrialSampler]</p></li>
<li><p><strong>sampler_categories</strong> (<em>list of str</em><em>, </em><em>optional</em>) – List of sampler categories you
want to use in experiment. Defaults to None, which resolves as
[“Uniform”, “Uniform”, “Proportional”, “Proportional”,
“Adaptive”, “Adaptive”, “Random”, “Random”].</p></li>
<li><p><strong>system_ordering</strong> (<em>list of str</em>) – The desired ordering of systems, if the order
is important. Order is specified by system id.
None, which resolves to [] By
default. One can also give an ordering of only some of the systems to run the
experiment on a subset of systems in the submission. [] Runs all systems in an
arbitrary ordering.</p></li>
<li><p><strong>bin_style_types</strong> (<em>list of str</em><em>, </em><em>optional</em>) – List of bin style types you want to
use in experiment. Defaults to None, which resolves as [‘equal’, ‘perc’].</p></li>
<li><p><strong>use_multinomials</strong> (<em>list of bool</em><em>, </em><em>optional</em>) – List of booleans for each sampler type
Defaults to None, which resolves as
[True, False, True, False, True, False, True, False].</p></li>
<li><p><strong>num_success_rounds_required</strong> (<em>int</em><em>, </em><em>optional</em>) – The number of rounds where the (1-alpha) confidence
interval’s range is within +- $delta width. Defaults to 2</p></li>
<li><p><strong>num_step_samples</strong> (<em>int</em><em>, </em><em>optional</em>) – the number of samples to ask for at each iteration
defaults to 100</p></li>
<li><p><strong>alpha</strong> (<em>num</em><em>, </em><em>optional</em>) – The specified probability alpha. Defaults to 0.05.</p></li>
<li><p><strong>delta</strong> (<em>num</em><em>, </em><em>optional</em>) – The specified interval range delta. Defaults to 0.01</p></li>
<li><p><strong>num_iterations</strong> (<em>int</em><em>, </em><em>optional</em>) – The number of iterations to run each sampler for.
Defaults to 1000</p></li>
<li><p><strong>use_initial_df</strong> (<em>bool</em><em>, </em><em>optional</em>) – A variable that tells is to use an initial
data frame if provided
for initial samples. Defaults to True.</p></li>
<li><p><strong>request_initial_samples</strong> (<em>bool</em><em>, </em><em>optional</em>) – A boolean that determines if the experiment (and hence) the
controller should request or supplement initial samples with initial samples
to provide for adequate stratum and metric coverage for initial estimates.
True by default.</p></li>
<li><p><strong>initial_samples</strong> (<em>int</em><em>, </em><em>optional</em>) – The number of samples to request initially.
Defaults to 100.</p></li>
<li><p><strong>parallelize</strong> (<em>bool</em><em>, </em><em>optional</em>) – A boolean determining whether to parallelize. True
parallelizes with joblib, False runs in serial. Defaults to True</p></li>
<li><p><strong>random_seed</strong> (<em>int</em><em>, </em><em>optional</em>) – The desired random seed. Set to None if it is desired
for the experiment to not be seeded. Defaults to None.</p></li>
<li><p><strong>final_log_path</strong> (<em>str</em><em>, </em><em>optional</em>) – A string which dictates the log file path
that all tmp file logs will be written to. Defaults to None and will
simply just not write to any logfile if no string is given.</p></li>
<li><p><strong>sample_first</strong> (<em>bool</em><em>, </em><em>optional</em>) – Used to flag sample first for certain strata methods.</p></li>
<li><p><strong>num_req_system</strong> (<em>int</em><em>, </em><em>optional</em>) – Used to request a certain number of systems,
used for specific strata techniques.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The two data
frames (summary_out_df, results_out_df) as a tuple so that they
can be written to a file.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(pandas.core.frame.DataFrame, pandas.core.frame.Dataframe)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aegis.oracle.oracle.OracleScript.get_key_df_copy">
<code class="sig-name descname">get_key_df_copy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aegis/oracle/oracle.html#OracleScript.get_key_df_copy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aegis.oracle.oracle.OracleScript.get_key_df_copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a deep copy of the data frame.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A copy of the key data frame.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pandas.core.frame.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aegis.oracle.oracle.OracleScript.is_within_ci_all_systems">
<code class="sig-name descname">is_within_ci_all_systems</code><span class="sig-paren">(</span><em class="sig-param">system_list</em>, <em class="sig-param">actual_score_list</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aegis/oracle/oracle.html#OracleScript.is_within_ci_all_systems"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aegis.oracle.oracle.OracleScript.is_within_ci_all_systems" title="Permalink to this definition">¶</a></dt>
<dd><p>Given the system objects and their actual system scores, provide a list of booleans
that tells us if each system’s estimate confidence interval contains the actual score.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>system_list</strong> (list of <a class="reference internal" href="aegis.acteval.system.html#aegis.acteval.system.System" title="aegis.acteval.system.System"><code class="xref py py-obj docutils literal notranslate"><span class="pre">aegis.acteval.system.System</span></code></a>) – The list of system objects</p></li>
<li><p><strong>actual_score_list</strong> (<em>list of float</em>) – The actual score of the systems</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of boolean values that each entry is True if the true score
is contained in the
confidence interval for that system, and False otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list of bool</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="aegis.oracle.oracle.OracleScript.key_df">
<code class="sig-name descname">key_df</code><em class="property"> = Empty DataFrame Columns: [] Index: []</em><a class="headerlink" href="#aegis.oracle.oracle.OracleScript.key_df" title="Permalink to this definition">¶</a></dt>
<dd><p>The read in data frame of the answer key.</p>
<p>Two columns: “trial_id” and “key”.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aegis.oracle.oracle.OracleScript.run_experiment">
<em class="property">static </em><code class="sig-name descname">run_experiment</code><span class="sig-paren">(</span><em class="sig-param">oracle_ref</em>, <em class="sig-param">input_dir</em>, <em class="sig-param">output_dir</em>, <em class="sig-param">metric_object</em>, <em class="sig-param">stratification_type</em>, <em class="sig-param">num_strata</em>, <em class="sig-param">system_ordering=None</em>, <em class="sig-param">sampler_types=None</em>, <em class="sig-param">sampler_categories=None</em>, <em class="sig-param">bin_style_types=None</em>, <em class="sig-param">use_multinomials=None</em>, <em class="sig-param">num_success_rounds_required=3</em>, <em class="sig-param">num_step_samples=100</em>, <em class="sig-param">alpha=0.05</em>, <em class="sig-param">delta=0.01</em>, <em class="sig-param">num_iterations=1000</em>, <em class="sig-param">use_initial_df=True</em>, <em class="sig-param">request_initial_samples=True</em>, <em class="sig-param">initial_samples=40</em>, <em class="sig-param">parallelize=True</em>, <em class="sig-param">run_id='experiment_0'</em>, <em class="sig-param">batch_id='2020-07-09'</em>, <em class="sig-param">git_commit_hash='No Git Commit Hash Provided'</em>, <em class="sig-param">random_seed=None</em>, <em class="sig-param">sample_first=False</em>, <em class="sig-param">num_req_systems=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aegis/oracle/oracle.html#OracleScript.run_experiment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aegis.oracle.oracle.OracleScript.run_experiment" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs a specified “experiment”, which takes the submission with the specified metric,
stratification
type and experimental parameters, and runs on samplers and with strataficiation bin
styles as specified, running each experiment as specified. Calls
<code class="xref py py-func docutils literal notranslate"><span class="pre">aegis.oracle.oracle.OracleScript.get_specific_experiment_result_data()</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>oracle_ref</strong> (<a class="reference internal" href="#aegis.oracle.oracle.Oracle" title="aegis.oracle.oracle.Oracle"><code class="xref py py-obj docutils literal notranslate"><span class="pre">aegis.oracle.oracle.Oracle</span></code></a>) – the Oracle object to call to get additional trials</p></li>
<li><p><strong>input_dir</strong> (<em>str</em>) – The path to the input directory of the submission</p></li>
<li><p><strong>output_dir</strong> (<em>str</em>) – The path to the output directory to create the results in.</p></li>
<li><p><strong>metric_object</strong> (<a class="reference internal" href="aegis.acteval.metrics.html#aegis.acteval.metrics.Metric" title="aegis.acteval.metrics.Metric"><code class="xref py py-obj docutils literal notranslate"><span class="pre">aegis.acteval.metrics.Metric</span></code></a>) – The reference to the metric object that specifies how the trials will be scored</p></li>
<li><p><strong>stratification_type</strong> (<a class="reference internal" href="aegis.acteval.strata.html#aegis.acteval.strata.Strata" title="aegis.acteval.strata.Strata"><code class="xref py py-obj docutils literal notranslate"><span class="pre">aegis.acteval.strata.Strata</span></code></a>) – Strata class that gives the stratification strategy and type of strata</p></li>
<li><p><strong>num_strata</strong> (<em>int</em>) – The number of strata to have.</p></li>
<li><p><strong>system_ordering</strong> (<em>list of str</em>) – The desired ordering of systems, if the order
is important. Order is specified by system id.
None, which resolves to [] By
default. One can also give an ordering of only some of the systems to run the
experiment on a subset of systems in the submission. [] Runs all systems in an
arbitrary ordering.</p></li>
<li><p><strong>sampler_types</strong> (list of <code class="xref py py-obj docutils literal notranslate"><span class="pre">abc.ABCMeta</span></code>, optional) – List of samplers you wish to use in experiment</p></li>
<li><p><strong>sampler_categories</strong> (<em>list of str</em><em>, </em><em>optional</em>) – List of sampler categories you
want to use in experiment. Defaults to None, which resolves as [].</p></li>
<li><p><strong>bin_style_types</strong> (<em>list of str</em><em>, </em><em>optional</em>) – List of bin style types you want to
use in experiment. Defaults to None, which resolves as [].</p></li>
<li><p><strong>use_multinomials</strong> (<em>list of bool</em><em>, </em><em>optional</em>) – List of booleans for each sampler type
Defaults to None, which resolves as [].</p></li>
<li><p><strong>num_success_rounds_required</strong> (<em>int</em><em>, </em><em>optional</em>) – The number of rounds where the (1-alpha) confidence
interval’s range is within +- $delta width. Defaults to 2</p></li>
<li><p><strong>num_step_samples</strong> (<em>int</em><em>, </em><em>optional</em>) – the number of samples to ask for at each iteration
defaults to 100</p></li>
<li><p><strong>alpha</strong> (<em>num</em><em>, </em><em>optional</em>) – The specified probability alpha. Defaults to 0.05.</p></li>
<li><p><strong>delta</strong> (<em>num</em><em>, </em><em>optional</em>) – The specified interval range delta. Defaults to 0.01</p></li>
<li><p><strong>num_iterations</strong> (<em>int</em><em>, </em><em>optional</em>) – The number of iterations to run each sampler for.
Defaults to 1000</p></li>
<li><p><strong>use_initial_df</strong> (<em>bool</em><em>, </em><em>optional</em>) – A variable that tells is to use an initial
data frame if provided
for initial samples. Defaults to True.</p></li>
<li><p><strong>request_initial_samples</strong> (<em>bool</em><em>, </em><em>optional</em>) – A boolean that determines if the experiment (and hence) the
controller should request or supplement initial samples with initial samples
to provide for adequate stratum and metric coverage for initial estimates.
True by default.</p></li>
<li><p><strong>initial_samples</strong> (<em>int</em><em>, </em><em>optional</em>) – The number of samples to request initially.
Defaults to 100.</p></li>
<li><p><strong>parallelize</strong> (<em>bool</em><em>, </em><em>optional</em>) – A boolean determining whether to parallelize. True
parallelizes with joblib, False runs in serial. Defaults to True</p></li>
<li><p><strong>run_id</strong> (<em>str</em><em>, </em><em>optional</em>) – An optional run_id value to add to the date.
Default “experiment_0”, but recommended
to be a combination of the submission name and the experiment parameters.</p></li>
<li><p><strong>batch_id</strong> (<em>str</em><em>, </em><em>optional</em>) – An optional batch_id value to add, the date by default</p></li>
<li><p><strong>git_commit_hash</strong> (<em>str</em><em>, </em><em>optional</em>) – The string of the git commit hash of this code.
If provided, it will write it to a text file git_commit_hash.txt.
Default value is “No Git Commit Hash Provided” so that we have something
to a file.</p></li>
<li><p><strong>random_seed</strong> (<em>int</em><em>, </em><em>optional</em>) – The desired random seed. Set to None if it is desired
for the experiment to not be seeded. Defaults to None.
for the experiment to not be seeded.</p></li>
<li><p><strong>sample_first</strong> (<em>bool</em>) – A variable that tells the experiment to obtain samples before
stratification</p></li>
<li><p><strong>num_req_system</strong> (<em>int</em><em>, </em><em>optional</em>) – Used to request a certain number of systems,
used for specific strata techniques.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Nothing. Directory Output_dir is created if it does not exist and additional
files from the experiment (including subfolders) are created. Files existing with the
same name as created files are overwritten, but files of other names are not deleted.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aegis.oracle.oracle.OracleScript.system_within_ci">
<em class="property">static </em><code class="sig-name descname">system_within_ci</code><span class="sig-paren">(</span><em class="sig-param">system</em>, <em class="sig-param">actual_score</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aegis/oracle/oracle.html#OracleScript.system_within_ci"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aegis.oracle.oracle.OracleScript.system_within_ci" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a single system object and its actual core, provides a boolean
that tells us if that system’s estimate confidence interval contains the actual score.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>system</strong> (<a class="reference internal" href="aegis.acteval.system.html#aegis.acteval.system.System" title="aegis.acteval.system.System"><code class="xref py py-obj docutils literal notranslate"><span class="pre">aegis.acteval.system.System</span></code></a>) – The system object</p></li>
<li><p><strong>actual_score</strong> (<em>float</em>) – The actual score of the system</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A boolean values that is True if the true score is contained in the
confidence interval for that system, and False otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="aegis.oracle.oracle.OracleScript.system_within_delta">
<em class="property">static </em><code class="sig-name descname">system_within_delta</code><span class="sig-paren">(</span><em class="sig-param">system</em>, <em class="sig-param">actual_score</em>, <em class="sig-param">delta</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aegis/oracle/oracle.html#OracleScript.system_within_delta"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aegis.oracle.oracle.OracleScript.system_within_delta" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a single system object and its actual core, provide a boolean
that tells us if that system’s estimate is within +- delta of the actual score</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>system</strong> (<a class="reference internal" href="aegis.acteval.system.html#aegis.acteval.system.System" title="aegis.acteval.system.System"><code class="xref py py-obj docutils literal notranslate"><span class="pre">aegis.acteval.system.System</span></code></a>) – The system object</p></li>
<li><p><strong>actual_score</strong> (<em>float</em>) – The actual score of the system</p></li>
<li><p><strong>delta</strong> (<em>float</em>) – The specified error range</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A boolean values that is True if the system’s true score is
contained in the
interval of system estimate +- delta, and False otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="aegis.oracle.oracle.compute_var">
<code class="sig-prename descclassname">aegis.oracle.oracle.</code><code class="sig-name descname">compute_var</code><span class="sig-paren">(</span><em class="sig-param">row</em>, <em class="sig-param">n</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aegis/oracle/oracle.html#compute_var"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aegis.oracle.oracle.compute_var" title="Permalink to this definition">¶</a></dt>
<dd><p>Method to compute var, using Using Var(x) = E(X^2) - E(X)^2.
Extracts columns ‘total_score_diff_sq’ and <cite>avg_score_diff</cite> from data frame row.</p>
<p>Because of floating point computations, variance may be slightly negative (near 0)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>row</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">pandas.core.series.Series</span></code>) – row of data frame</p></li>
<li><p><strong>n</strong> (<em>int</em>) – the number of examples</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A computed variance (square of the standard deviation).</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="aegis.oracle.html" class="btn btn-neutral float-left" title="aegis.oracle package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, NIST MIG

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>